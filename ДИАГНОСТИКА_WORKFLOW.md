# Диагностика проблемы с workflow

## Возможные причины, почему workflow не появился

1. **Файл создан не в той папке**
   - Должен быть: `.github/workflows/etl.yml` (или любое имя с расширением `.yml`)
   - НЕ должно быть: `github/workflows/etl.yml` (без точки)

2. **Неправильное расширение файла**
   - Должно быть: `.yml` или `.yaml`
   - НЕ должно быть: `.txt`, `.md` и т.д.

3. **Синтаксическая ошибка в YAML**
   - GitHub не распознает файл как workflow

4. **Workflow отключен в настройках репозитория**
   - Нужно проверить настройки Actions

---

## Как проверить

### Шаг 1: Проверь, что файл создан правильно

1. Открой свой репозиторий на GitHub
2. Перейди в папку `.github/workflows/`
3. Должен быть файл `etl.yml` (или другое имя с `.yml`)

**Если файла нет:**
- Создай его заново по инструкции ниже

**Если файл есть:**
- Проверь его содержимое (см. шаг 2)

### Шаг 2: Проверь содержимое файла

Открой файл `.github/workflows/etl.yml` в GitHub и убедись, что там правильный YAML код (см. файл `WORKFLOW_ДЛЯ_КОПИРОВАНИЯ.yml`).

### Шаг 3: Проверь настройки Actions

1. Открой репозиторий → **Settings**
2. Перейди в **Actions** → **General**
3. Убедись, что **"Allow all actions and reusable workflows"** включено
4. Прокрути вниз и нажми **"Save"**

---

## Решение: Создать workflow заново

### Вариант 1: Через веб-интерфейс (пошагово)

1. **Открой репозиторий на GitHub**

2. **Нажми "Add file" → "Create new file"**

3. **В поле имени файла введи ТОЧНО:**
   ```
   .github/workflows/etl.yml
   ```
   Важно: начинается с точки `.github` (не `github`)

4. **Скопируй содержимое из файла `WORKFLOW_ДЛЯ_КОПИРОВАНИЯ.yml`**

5. **Вставь в редактор GitHub**

6. **Нажми "Commit new file"**

7. **Проверь:**
   - Перейди во вкладку **Actions**
   - Должен появиться workflow **"ETL (ручной запуск)"**

### Вариант 2: Через терминал (если есть доступ к репозиторию)

```bash
# Перейди в папку репозитория
cd /путь/к/репозиторию

# Создай папки
mkdir -p .github/workflows

# Скопируй файл workflow
# (скопируй содержимое из WORKFLOW_ДЛЯ_КОПИРОВАНИЯ.yml)

# Закоммить
git add .github/workflows/etl.yml
git commit -m "Add ETL workflow"
git push
```

---

## Если всё равно не работает

1. **Проверь логи:**
   - GitHub → Actions → если есть ошибки, они будут видны

2. **Проверь имя workflow:**
   - В файле должно быть `name: ETL (ручной запуск)`
   - Это имя появится в списке workflows

3. **Попробуй другое имя файла:**
   - Вместо `etl.yml` попробуй `daily_etl.yml` или `run_etl.yml`

4. **Проверь синтаксис YAML:**
   - Можно использовать онлайн валидатор YAML
   - Или просто скопируй точно из `WORKFLOW_ДЛЯ_КОПИРОВАНИЯ.yml`

---

## Минимальный тестовый workflow

Если ничего не помогает, попробуй создать минимальный workflow для проверки:

```yaml
name: Test Workflow

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Test
        run: echo "Workflow работает!"
```

Если этот минимальный workflow появится — значит проблема в содержимом основного workflow.
